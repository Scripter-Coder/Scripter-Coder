-- WHY ARE YOU EVEN HERE?

-- SHI GANG HUB | MM2 Script by SHI GANG (Stable Version)

-- With Working ESP, Aimbot (Box + Button), Extras, Admin Chat, Teleport, Auto Kill

local Players = game:GetService("Players")

local LocalPlayer = Players.LocalPlayer

local RunService = game:GetService("RunService")

local Workspace = game:GetService("Workspace")

local UserInputService = game:GetService("UserInputService")

local VirtualInputManager = game:GetService("VirtualInputManager")

local CoreGui = game:GetService("CoreGui") -- Timer iÃ§in ekledim

-- MM2 dÄ±ÅŸÄ±nda Ã§alÄ±ÅŸmasÄ±n

if game.PlaceId ~= 142823291 then

    return

end

local OrionLib = loadstring(game:HttpGet("https://raw.githubusercontent.com/jensonhirst/Orion/main/source"))()

local Window = OrionLib:MakeWindow({

    Name = "SHI GANG HUB | MM2",

    HidePremium = false,

    SaveConfig = false,

    ConfigFolder = "SHI_GANG_MMHUB"

})

-- TIMER GUI KURULUMU

local timerGui = Instance.new("ScreenGui")

timerGui.Name = "RoundTimerGUI"

timerGui.IgnoreGuiInset = true

timerGui.ResetOnSpawn = false

timerGui.Parent = CoreGui

local timerLabel = Instance.new("TextLabel")

timerLabel.Size = UDim2.new(0, 200, 0, 40)

timerLabel.Position = UDim2.new(0.5, -100, 0, 5)

timerLabel.BackgroundTransparency = 1

timerLabel.TextColor3 = Color3.fromRGB(255, 215, 0) -- SarÄ± renk

timerLabel.Font = Enum.Font.GothamBold

timerLabel.TextScaled = true

timerLabel.TextStrokeTransparency = 0.3

timerLabel.TextStrokeColor3 = Color3.new(0, 0, 0)

timerLabel.Text = ""

timerLabel.Parent = timerGui

local roundDuration = 180

local roundStartTime = 0

local timerActive = false

RunService.RenderStepped:Connect(function()

    if timerActive then

        local timeLeft = roundDuration - (tick() - roundStartTime)

        if timeLeft <= 0 then

            timerLabel.Text = "Time's Up!"

        else

            local minutes = math.floor(timeLeft / 60)

            local seconds = math.floor(timeLeft % 60)

            timerLabel.Text = string.format("Time Left: %d:%02d", minutes, seconds)

        end

    end

end)

-- ESP

local espObjects = {}

local espEnabled = false

local nextESPUpdate = 0

local function getMurderer()

    for _, player in pairs(Players:GetPlayers()) do

        if player.Backpack:FindFirstChild("Knife") or (player.Character and player.Character:FindFirstChild("Knife")) then

            return player

        end

    end

end

local function getSheriff()

    for _, player in pairs(Players:GetPlayers()) do

        if player.Backpack:FindFirstChild("Gun") or (player.Character and player.Character:FindFirstChild("Gun")) then

            return player

        end

    end

end

local function clearESP()

    for _, esp in pairs(espObjects) do

        if esp and esp.Parent then

            esp:Destroy()

        end

    end

    espObjects = {}

end

local function applyESP()

    clearESP()

    if not espEnabled then return end

    local murderer = getMurderer()

    local sheriff = getSheriff()

    for _, player in pairs(Players:GetPlayers()) do

        if player.Character and player.Character:FindFirstChild("HumanoidRootPart") and player ~= LocalPlayer then

            local highlight = Instance.new("Highlight")

            highlight.Name = "SHIGANG_ESP"

            highlight.Adornee = player.Character

            highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop

            highlight.FillTransparency = 0.3

            highlight.OutlineTransparency = 0

            if player == murderer then

                highlight.FillColor = Color3.fromRGB(255, 0, 0)

                highlight.OutlineColor = Color3.fromRGB(255, 0, 0)

            elseif player == sheriff then

                highlight.FillColor = Color3.fromRGB(0, 100, 255)

                highlight.OutlineColor = Color3.fromRGB(0, 100, 255)

            else

                highlight.FillColor = Color3.fromRGB(0, 255, 0)

                highlight.OutlineColor = Color3.fromRGB(0, 255, 0)

            end

            highlight.Parent = Workspace

            table.insert(espObjects, highlight)

        end

    end

end

RunService.Heartbeat:Connect(function()

    if espEnabled and tick() >= nextESPUpdate then

        applyESP()

        nextESPUpdate = tick() + 3

    end

end)

-- ESP TAB

local espTab = Window:MakeTab({

    Name = "ESP",

    Icon = "rbxassetid://4483345998",

    PremiumOnly = false

})

espTab:AddToggle({

    Name = "Enable ESP",

    Default = false,

    Callback = function(state)

        espEnabled = state

        if not state then

            clearESP()

        else

            applyESP()

        end

    end

})

-- **Buraya Timer ESP toggleâ€™Ä±nÄ± ekledim**

espTab:AddToggle({

    Name = "Enable Timer ESP",

    Default = false,

    Callback = function(state)

        timerGui.Enabled = state

        timerActive = state

        if state then

            roundStartTime = tick()

        end

    end

})

-- Fonksiyonlar

local function createNameTag(player)

    if player.Character and player.Character:FindFirstChild("Head") then

        local head = player.Character.Head

        if not head:FindFirstChild("UserNameTag") then

            local billboard = Instance.new("BillboardGui", head)

            billboard.Name = "UserNameTag"

            billboard.Size = UDim2.new(0, 200, 0, 50)

            billboard.StudsOffset = Vector3.new(0, 2.5, 0)

            billboard.AlwaysOnTop = true

            local label = Instance.new("TextLabel", billboard)

            label.Size = UDim2.new(1, 0, 1, 0)

            label.Text = player.Name

            label.TextColor3 = Color3.new(1, 1, 0)

            label.BackgroundTransparency = 1

            label.TextScaled = true

            label.Font = Enum.Font.GothamBold

        end

    end

end

local function removeNameTag(player)

    if player.Character and player.Character:FindFirstChild("Head") then

        local tag = player.Character.Head:FindFirstChild("UserNameTag")

        if tag then

            tag:Destroy()

        end

    end

end

-- DeÄŸiÅŸken

local nameESPEnabled = false

-- ðŸ”˜ TOGGLE (ESP sekmene ekle!)

espTab:AddToggle({

    Name = "Show Username ESP",

    Default = false,

    Callback = function(state)

        nameESPEnabled = state

        for _, player in ipairs(Players:GetPlayers()) do

            if player ~= LocalPlayer then

                if state then

                    createNameTag(player)

                else

                    removeNameTag(player)

                end

            end

        end

    end

})

-- Yeni giren oyuncular iÃ§in otomatik etiket

Players.PlayerAdded:Connect(function(player)

    player.CharacterAdded:Connect(function()

        if nameESPEnabled then

            task.wait(1)

            createNameTag(player)

        end

    end)

end)

local tracerData = {}

local beamESPEnabled = false

local function createTracer(player)

    if player == LocalPlayer then return end

    if not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then return end

    local hrp = player.Character.HumanoidRootPart

    local color = Color3.fromRGB(0, 255, 0)

    if player == getMurderer() then

        color = Color3.fromRGB(255, 0, 0)

    elseif player == getSheriff() then

        color = Color3.fromRGB(0, 100, 255)

    end

    local attachLocal = Instance.new("Attachment", LocalPlayer.Character.HumanoidRootPart)

    local attachTarget = Instance.new("Attachment", hrp)

    local beam = Instance.new("Beam")

    beam.Attachment0 = attachLocal

    beam.Attachment1 = attachTarget

    beam.Width0 = 0.1

    beam.Width1 = 0.1

    beam.FaceCamera = true

    beam.Color = ColorSequence.new(color)

    beam.LightEmission = 1

    beam.Transparency = NumberSequence.new(0)

    beam.Parent = hrp

    local distanceGui = Instance.new("BillboardGui")

    distanceGui.Size = UDim2.new(0, 100, 0, 20)

    distanceGui.StudsOffset = Vector3.new(0, 3, 0)

    distanceGui.Adornee = hrp

    distanceGui.AlwaysOnTop = true

    distanceGui.Parent = hrp

    local label = Instance.new("TextLabel", distanceGui)

    label.Size = UDim2.new(1, 0, 1, 0)

    label.BackgroundTransparency = 1

    label.TextColor3 = color

    label.Font = Enum.Font.GothamBold

    label.TextScaled = true

    label.Text = "..."

    tracerData[player] = {

        beam = beam,

        label = label,

        gui = distanceGui,

        targetAttachment = attachTarget,

        localAttachment = attachLocal

    }

end

RunService.RenderStepped:Connect(function()

    if not beamESPEnabled then return end

    local myHRP = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")

    if not myHRP then return end

    for player, data in pairs(tracerData) do

        if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then

            local targetHRP = player.Character.HumanoidRootPart

            local dist = math.floor((targetHRP.Position - myHRP.Position).Magnitude)

            data.label.Text = dist .. " studs"

        end

    end

end)

espTab:AddToggle({

    Name = "Distance ESP",

    Default = false,

    Callback = function(state)

        beamESPEnabled = state

        if state then

            for _, p in ipairs(Players:GetPlayers()) do

                if p ~= LocalPlayer then

                    createTracer(p)

                end

            end

            Players.PlayerAdded:Connect(function(p)

                p.CharacterAdded:Connect(function()

                    task.wait(1)

                    if beamESPEnabled then

                        createTracer(p)

                    end

                end)

            end)

        else

            for _, data in pairs(tracerData) do

                if data.beam then data.beam:Destroy() end

                if data.gui then data.gui:Destroy() end

                if data.localAttachment then data.localAttachment:Destroy() end

                if data.targetAttachment then data.targetAttachment:Destroy() end

            end

            tracerData = {}

        end

    end

})

local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local espEnabled = false
local espObjects = {}

local function createESP(part)
    if not part or espObjects[part] then return end

    local billboard = Instance.new("BillboardGui")
    billboard.Name = "GunDropESP"
    billboard.Adornee = part
    billboard.Size = UDim2.new(0, 100, 0, 40)
    billboard.AlwaysOnTop = true
    billboard.Parent = part

    local textLabel = Instance.new("TextLabel")
    textLabel.Size = UDim2.new(1, 0, 1, 0)
    textLabel.BackgroundTransparency = 1
    textLabel.Text = "Gun"
    textLabel.TextColor3 = Color3.new(1, 0, 0)
    textLabel.TextStrokeTransparency = 0
    textLabel.TextScaled = true
    textLabel.Parent = billboard

    espObjects[part] = billboard
end

local function removeAllESP()
    for part, billboard in pairs(espObjects) do
        if billboard and billboard.Parent then
            billboard:Destroy()
        end
    end
    espObjects = {}
end

local function updateESP()
    -- Clean old ESPs for parts no longer valid
    for part, billboard in pairs(espObjects) do
        if not part or not part.Parent then
            if billboard and billboard.Parent then
                billboard:Destroy()
            end
            espObjects[part] = nil
        end
    end

    -- Find all GunDrop parts inside all models in workspace
    for _, model in pairs(Workspace:GetChildren()) do
        if model:IsA("Model") then
            local gunDrop = model:FindFirstChild("GunDrop")
            if gunDrop and gunDrop:IsA("BasePart") then
                createESP(gunDrop)
            end
        end
    end
end

-- Add toggle to your Orion UI
aimbotTab:AddToggle({
    Name = "ESP GunDrop",
    Default = false,
    Callback = function(state)
        espEnabled = state
        if not espEnabled then
            removeAllESP()
        else
            updateESP()
        end
    end
})

-- Optional: Update ESP every few seconds to catch new GunDrops or removed ones
RunService.Heartbeat:Connect(function()
    if espEnabled then
        updateESP()
    end
end)

-- TELEPORT TAB

local tpTab = Window:MakeTab({

    Name = "Teleport",

    Icon = "rbxassetid://4483345998",

    PremiumOnly = false

})

tpTab:AddButton({

    Name = "Teleport to Murderer",

    Callback = function()

        local m = getMurderer()

        if m and m.Character and m.Character:FindFirstChild("HumanoidRootPart") then

            LocalPlayer.Character.HumanoidRootPart.CFrame = m.Character.HumanoidRootPart.CFrame + Vector3.new(2,0,0)

        end

    end

})

tpTab:AddButton({

    Name = "Teleport to Sheriff",

    Callback = function()

        local s = getSheriff()

        if s and s.Character and s.Character:FindFirstChild("HumanoidRootPart") then

            LocalPlayer.Character.HumanoidRootPart.CFrame = s.Character.HumanoidRootPart.CFrame + Vector3.new(2,0,0)

        end

    end

})

tpTab:AddButton({
    Name = "Teleport to Gun",

    Callback = function()
        local gunDrop = nil

        -- Loop through all descendants in Workspace
        for _, model in ipairs(workspace:GetDescendants()) do
            if model:IsA("Model") then
                local part = model:FindFirstChild("GunDrop")
                if part and part:IsA("BasePart") then
                    gunDrop = part
                    break
                end
            end
        end

        -- If GunDrop was found, teleport player
        if gunDrop then
            local LocalPlayer = game.Players.LocalPlayer
            if LocalPlayer and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                LocalPlayer.Character.HumanoidRootPart.CFrame = gunDrop.CFrame + Vector3.new(1, 0, 0)
            end
        else
            warn("GunDrop not found in any model.")
        end
    end
})

-- AIMBOT TAB

local aimbotTab = Window:MakeTab({

    Name = "Aimbot",

    Icon = "rbxassetid://6031280882",

    PremiumOnly = false

})

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")
local VirtualInputManager = game:GetService("VirtualInputManager")
local Workspace = game:GetService("Workspace")
local Camera = Workspace.CurrentCamera

local aimbotEnabled = false
local boxVisible = true

-- Create ScreenGui and box (like an indicator)
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "AimbotBoxGui"
screenGui.ResetOnSpawn = false
screenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

local aimbotBox = Instance.new("TextLabel")
aimbotBox.Name = "AimbotBox"
aimbotBox.Size = UDim2.new(0, 120, 0, 50)
aimbotBox.Position = UDim2.new(0.5, -60, 0.7, 0)
aimbotBox.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
aimbotBox.BackgroundTransparency = 0.1
aimbotBox.BorderSizePixel = 5
aimbotBox.BorderColor3 = Color3.fromHSV(0, 1, 1)
aimbotBox.Text = "AIMBOT ON"
aimbotBox.TextColor3 = Color3.fromRGB(255, 255, 255)
aimbotBox.TextScaled = true
aimbotBox.Parent = screenGui

-- Color animation for border
coroutine.wrap(function()
    while aimbotBox and aimbotBox.Parent do
        local hue = tick() % 1
        aimbotBox.BorderColor3 = Color3.fromHSV(hue, 1, 1)
        wait(0.02)
    end
end)()

-- Function to toggle box visibility
local function updateBoxVisibility()
    screenGui.Enabled = boxVisible and aimbotEnabled
end

-- Find player with Knife in Backpack or Character
local function getKnifePlayer()
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            local hasKnife =
                (player:FindFirstChild("Backpack") and player.Backpack:FindFirstChild("Knife")) or
                (player.Character and player.Character:FindFirstChild("Knife"))
            if hasKnife then
                return player
            end
        end
    end
end

local function smoothAim(targetPos, lerpSpeed)
    lerpSpeed = lerpSpeed or 0.2
    local camPos = Camera.CFrame.Position
    local goalCFrame = CFrame.new(camPos, targetPos)
    Camera.CFrame = Camera.CFrame:Lerp(goalCFrame, lerpSpeed)
end

local lastShootTime = 0
local shootCooldown = 0.15

local function aimAndShoot()
    local targetPlayer = getKnifePlayer()
    if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
        local hrp = targetPlayer.Character.HumanoidRootPart
        local targetPos = hrp.Position + Vector3.new(0, hrp.Size.Y / 2, 0)

        smoothAim(targetPos, 0.25)

        if tick() - lastShootTime > shootCooldown then
            VirtualInputManager:SendMouseButtonEvent(0, 0, 0, true, game, 1)
            task.wait(0.05)
            VirtualInputManager:SendMouseButtonEvent(0, 0, 0, false, game, 1)
            lastShootTime = tick()
        end
    end
end

-- Add toggle in Orion UI
aimbotTab:AddToggle({
    Name = "Enable Aimbot",
    Default = false,
    Callback = function(state)
        aimbotEnabled = state
        updateBoxVisibility()
    end
})

-- Button to manually show/hide aimbot box regardless of toggle state
aimbotTab:AddButton({
    Name = "Show/Hide Aimbot Box",
    Callback = function()
        boxVisible = not boxVisible
        updateBoxVisibility()
    end
})

-- Main loop
RunService.RenderStepped:Connect(function()
    if aimbotEnabled then
        aimAndShoot()
    end
end)

-- AUTO KILL TAB

local killTab = Window:MakeTab({

    Name = "Auto Kill",

    Icon = "rbxassetid://4483345998",

    PremiumOnly = false

})

killTab:AddButton({

    Name = "Teleport + Knife All",

    Callback = function()

        if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Knife") then

            for _, target in pairs(Players:GetPlayers()) do

                if target ~= LocalPlayer and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then

                    LocalPlayer.Character.HumanoidRootPart.CFrame = target.Character.HumanoidRootPart.CFrame + Vector3.new(0, 0, 1)

                    wait(0.1)

                end

            end

        end

    end

})

-- ADMIN CHAT TAB

local chatTab = Window:MakeTab({

    Name = "Admin Chat",

    Icon = "rbxassetid://4483345998",

    PremiumOnly = false

})

chatTab:AddTextbox({

    Name = "Message",

    Default = "",

    TextDisappear = false,

    Callback = function(msg)

        local fakeMsg = Instance.new("Message", Workspace)

        fakeMsg.Text = msg

        task.delay(3, function()

            fakeMsg:Destroy()

        end)

    end

})

-- Trade Scam Tab

    local tradeTab = Window:MakeTab({

        Name = "Trade Scam",

        Icon = "rbxassetid://4483345998",

        PremiumOnly = false

    })

    -- Updated Trade Scam Section

    tradeTab:AddParagraph("Write Victim's User Below", "")

    local playerUsername = ""

    tradeTab:AddTextbox({

        Name = "Player",

        Default = "",

        TextDisappear = false,

        Callback = function(Value)

            playerUsername = Value

            OrionLib:MakeNotification({

                Name = "Username Saved",

                Content = "Victim: " .. playerUsername,

                Image = "rbxassetid://4483345998",

                Time = 5

            })

        end

    })

    tradeTab:AddButton({

        Name = "Freeze Trade",

        Callback = function()

            OrionLib:MakeNotification({

                Name = "Trade",

                Content = "Trade has been frozen for " .. playerUsername,

                Image = "rbxassetid://4483345998",

                Time = 5

            })

        end

    })

    tradeTab:AddButton({

        Name = "Auto Accept ",

        Callback = function()

            OrionLib:MakeNotification({

                Name = "Trade",

                Content = playerUsername .. " will automatically accept the trade.",

                Image = "rbxassetid://4483345998",

                Time = 5

            })

        end

    })

    

    

-- EXTRAS TAB

local extrasTab = Window:MakeTab({

    Name = "Extras",

    Icon = "rbxassetid://4483345998",

    PremiumOnly = false

})

extrasTab:AddTextbox({

    Name = "Set WalkSpeed",

    Default = "16",

    TextDisappear = false,

    Callback = function(Value)

        if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then

            LocalPlayer.Character.Humanoid.WalkSpeed = tonumber(Value) or 16

        end

    end

})

-- Proximity Alarm

local soundEnabled = false

local soundPlaying = false

local alarmSound = Instance.new("Sound", Workspace)

alarmSound.SoundId = "rbxassetid://9118825103"

alarmSound.Looped = true

alarmSound.Volume = 1

extrasTab:AddToggle({

    Name = "Enable Proximity Alarm",

    Default = false,

    Callback = function(state)

        soundEnabled = state

        if not state and soundPlaying then

            alarmSound:Stop()

            soundPlaying = false

        end

    end

})

RunService.Heartbeat:Connect(function()

    if not soundEnabled then return end

    local m = getMurderer()

    local s = getSheriff()

    local pos = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") and LocalPlayer.Character.HumanoidRootPart.Position

    if not pos then return end

    local dangerClose = false

    if m and m.Character and m.Character:FindFirstChild("HumanoidRootPart") then

        if (m.Character.HumanoidRootPart.Position - pos).Magnitude < 20 then

            dangerClose = true

        end

    end

    if s and s.Character and s.Character:FindFirstChild("HumanoidRootPart") then

        if (s.Character.HumanoidRootPart.Position - pos).Magnitude < 15 then

            dangerClose = true

        end

    end

    if dangerClose and not soundPlaying then

        alarmSound:Play()

        soundPlaying = true

    elseif not dangerClose and soundPlaying then

        alarmSound:Stop()

        soundPlaying = false

    end

end)

-- âœ… AUTO GRAB GUN

local autoGrabEnabled = false
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")

local LocalPlayer = Players.LocalPlayer

extrasTab:AddToggle({
    Name = "Auto Grab Gun",
    Default = false,
    Callback = function(state)
        autoGrabEnabled = state
    end
})

RunService.Heartbeat:Connect(function()
    if autoGrabEnabled and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        -- Search for GunDrop inside any model in Workspace
        for _, model in ipairs(Workspace:GetDescendants()) do
            if model:IsA("Model") then
                local gunDrop = model:FindFirstChild("GunDrop")
                if gunDrop and gunDrop:IsA("BasePart") then
                    -- Teleport to the gun
                    LocalPlayer.Character.HumanoidRootPart.CFrame = gunDrop.CFrame + Vector3.new(0, 0, 1)
                    break
                end
            end
        end
    end
end)

extrasTab:AddToggle({

	Name = "NoClip",	Default = false,

	Callback = function(value)

		noclipActive = value

		if noclipActive then

			RunService.Stepped:Connect(function()

				if noclipActive and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then

					for _, part in ipairs(LocalPlayer.Character:GetDescendants()) do

						if part:IsA("BasePart") and part.CanCollide == true then

							part.CanCollide = false

						end

					end

				end

			end)

		end

	end

})

local xrayEnabled = false

extrasTab:AddToggle({

    Name = "X-Ray",

    Default = false,

    Callback = function(state)

        xrayEnabled = state

        for _, object in ipairs(workspace:GetDescendants()) do

            if object:IsA("BasePart") and object.Transparency < 1 then

                if xrayEnabled then

                    object.LocalTransparencyModifier = 0.7

                else

                    object.LocalTransparencyModifier = 0

                end

            end

        end

    end

})

OrionLib:Init()
