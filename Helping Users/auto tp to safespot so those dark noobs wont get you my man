-- Auto Teleport Platform Script
-- Creates platform and auto-teleports you to it

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer

-- Platform position: 50 studs below (55, 4, -262)
local platformPosition = Vector3.new(55, 4 - 50, -262)  -- Y position is now -46
local platformSize = Vector3.new(100, 1, 100)
local platformName = "TeleportPlatform"
local platform = nil

-- Auto-teleport variables
local autoTeleportEnabled = false
local teleportConnection = nil
local teleportCooldown = 10  -- 10 seconds cooldown
local lastTeleportTime = 0

-- Create the platform
local function createPlatform()
    -- Remove old platform if exists
    if workspace:FindFirstChild(platformName) then
        workspace[platformName]:Destroy()
    end
    
    -- Create new platform
    platform = Instance.new("Part")
    platform.Name = platformName
    platform.Size = platformSize
    platform.Position = platformPosition
    platform.Anchored = true
    platform.CanCollide = true
    platform.Transparency = 0.5
    platform.Color = Color3.new(1, 0.5, 0)  -- Orange color
    platform.Material = Enum.Material.Neon
    platform.Parent = workspace
    
    print("Platform created at:", platformPosition)
    return platform
end

-- Teleport to platform
local function teleportToPlatform()
    local character = player.Character
    if not character then 
        return false
    end
    
    local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
    if not humanoidRootPart then 
        return false
    end
    
    if not platform then
        createPlatform()
    end
    
    -- Check if humanoid is alive
    local humanoid = character:FindFirstChildOfClass("Humanoid")
    if not humanoid or humanoid.Health <= 0 then
        return false
    end
    
    -- Teleport directly to platform (5 studs above it)
    humanoidRootPart.CFrame = CFrame.new(platform.Position + Vector3.new(0, 5, 0))
    lastTeleportTime = tick()
    return true
end

-- Toggle auto-teleport
local function toggleAutoTeleport()
    autoTeleportEnabled = not autoTeleportEnabled
    
    if autoTeleportEnabled then
        -- Create platform if it doesn't exist
        if not platform then
            createPlatform()
        end
        
        -- Reset last teleport time
        lastTeleportTime = 0
        
        -- Start auto-teleport loop
        teleportConnection = RunService.Heartbeat:Connect(function()
            if not autoTeleportEnabled then return end
            
            local currentTime = tick()
            
            -- Check if cooldown has passed (10 seconds)
            if currentTime - lastTeleportTime >= teleportCooldown then
                if teleportToPlatform() then
                    print("Auto-teleported! Next teleport in 10 seconds")
                end
            end
        end)
        
        print("Auto-teleport ENABLED - Teleporting every 10 seconds")
    else
        -- Stop auto-teleport
        if teleportConnection then
            teleportConnection:Disconnect()
            teleportConnection = nil
        end
        
        print("Auto-teleport DISABLED")
    end
end

-- Start auto-teleport system
local function startAutoTeleport()
    -- Create platform first
    createPlatform()
    
    -- Enable auto-teleport
    if not autoTeleportEnabled then
        toggleAutoTeleport()
    end
    
    -- Handle respawns
    player.CharacterAdded:Connect(function(character)
        task.wait(1) -- Wait for character to load
        if autoTeleportEnabled then
            -- Teleport immediately after respawn
            task.wait(0.5)
            teleportToPlatform()
        end
    end)
    
    print("Auto-teleport system started!")
end

-- Stop auto-teleport system
local function stopAutoTeleport()
    if autoTeleportEnabled then
        toggleAutoTeleport()
    end
end

-- Teleport once manually
local function teleportOnce()
    if teleportToPlatform() then
        print("Teleported once to platform!")
    end
end

-- Create simple GUI with properly spaced buttons
local function createSimpleGUI()
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "TeleportControls"
    screenGui.Parent = game.CoreGui
    
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0, 280, 0, 320)  -- Even taller for more spacing
    frame.Position = UDim2.new(0.5, -140, 0, 20)
    frame.BackgroundColor3 = Color3.new(0.2, 0.2, 0.2)
    frame.BorderSizePixel = 0
    frame.Parent = screenGui
    
    local title = Instance.new("TextLabel")
    title.Text = "Auto Teleport Platform"
    title.Size = UDim2.new(1, 0, 0, 40)
    title.BackgroundColor3 = Color3.new(0.8, 0.4, 0)
    title.TextColor3 = Color3.new(1, 1, 1)
    title.Font = Enum.Font.SourceSansBold
    title.TextSize = 20
    title.Parent = frame
    
    -- Status label
    local statusLabel = Instance.new("TextLabel")
    statusLabel.Text = "Status: Ready"
    statusLabel.Size = UDim2.new(0.9, 0, 0, 25)
    statusLabel.Position = UDim2.new(0.05, 0, 0.15, 0)
    statusLabel.BackgroundTransparency = 1
    statusLabel.TextColor3 = Color3.new(1, 1, 1)
    statusLabel.Font = Enum.Font.SourceSansBold
    statusLabel.TextSize = 14
    statusLabel.TextXAlignment = Enum.TextXAlignment.Left
    statusLabel.Parent = frame
    
    -- Cooldown label
    local cooldownLabel = Instance.new("TextLabel")
    cooldownLabel.Text = "Cooldown: 10s"
    cooldownLabel.Size = UDim2.new(0.9, 0, 0, 25)
    cooldownLabel.Position = UDim2.new(0.05, 0, 0.22, 0)
    cooldownLabel.BackgroundTransparency = 1
    cooldownLabel.TextColor3 = Color3.new(0.8, 0.8, 0.8)
    cooldownLabel.Font = Enum.Font.SourceSans
    cooldownLabel.TextSize = 14
    cooldownLabel.TextXAlignment = Enum.TextXAlignment.Left
    cooldownLabel.Parent = frame
    
    -- Button 1: Create Platform
    local createBtn = Instance.new("TextButton")
    createBtn.Text = "1. Create Platform"
    createBtn.Size = UDim2.new(0.9, 0, 0, 45)
    createBtn.Position = UDim2.new(0.05, 0, 0.30, 0)
    createBtn.BackgroundColor3 = Color3.new(0, 0.6, 0)
    createBtn.TextColor3 = Color3.new(1, 1, 1)
    createBtn.Font = Enum.Font.SourceSansBold
    createBtn.TextSize = 16
    createBtn.Parent = frame
    
    createBtn.MouseButton1Click:Connect(function()
        createPlatform()
        statusLabel.Text = "Status: Platform Created"
    end)
    
    -- Button 2: Teleport Once
    local teleportOnceBtn = Instance.new("TextButton")
    teleportOnceBtn.Text = "2. Teleport Once"
    teleportOnceBtn.Size = UDim2.new(0.9, 0, 0, 45)
    teleportOnceBtn.Position = UDim2.new(0.05, 0, 0.48, 0)  -- 18% gap
    teleportOnceBtn.BackgroundColor3 = Color3.new(0, 0.47, 1)  -- Blue
    teleportOnceBtn.TextColor3 = Color3.new(1, 1, 1)
    teleportOnceBtn.Font = Enum.Font.SourceSansBold
    teleportOnceBtn.TextSize = 16
    teleportOnceBtn.Parent = frame
    
    teleportOnceBtn.MouseButton1Click:Connect(function()
        if teleportToPlatform() then
            statusLabel.Text = "Status: Teleported once"
        else
            statusLabel.Text = "Status: Can't teleport (dead?)"
        end
    end)
    
    -- Button 3: Auto-Teleport Toggle
    local toggleBtn = Instance.new("TextButton")
    toggleBtn.Name = "ToggleButton"
    toggleBtn.Text = "3. Auto-Teleport: OFF"
    toggleBtn.Size = UDim2.new(0.9, 0, 0, 45)
    toggleBtn.Position = UDim2.new(0.05, 0, 0.66, 0)  -- 18% gap
    toggleBtn.BackgroundColor3 = Color3.new(0.8, 0, 0)  -- Red when off
    toggleBtn.TextColor3 = Color3.new(1, 1, 1)
    toggleBtn.Font = Enum.Font.SourceSansBold
    toggleBtn.TextSize = 16
    toggleBtn.Parent = frame
    
    local function updateToggleButton()
        if autoTeleportEnabled then
            toggleBtn.Text = "3. Auto-Teleport: ON"
            toggleBtn.BackgroundColor3 = Color3.new(0, 0.6, 0)  -- Green when on
            statusLabel.Text = "Status: Auto-teleporting (10s)"
        else
            toggleBtn.Text = "3. Auto-Teleport: OFF"
            toggleBtn.BackgroundColor3 = Color3.new(0.8, 0, 0)  -- Red when off
            statusLabel.Text = "Status: Ready"
        end
    end
    
    toggleBtn.MouseButton1Click:Connect(function()
        toggleAutoTeleport()
        updateToggleButton()
    end)
    
    -- Button 4: Remove Platform
    local removeBtn = Instance.new("TextButton")
    removeBtn.Text = "4. Remove Platform"
    removeBtn.Size = UDim2.new(0.9, 0, 0, 45)
    removeBtn.Position = UDim2.new(0.05, 0, 0.84, 0)  -- 18% gap (FAR from button 3!)
    removeBtn.BackgroundColor3 = Color3.new(0.5, 0.5, 0.5)
    removeBtn.TextColor3 = Color3.new(1, 1, 1)
    removeBtn.Font = Enum.Font.SourceSansBold
    removeBtn.TextSize = 16
    removeBtn.Parent = frame
    
    removeBtn.MouseButton1Click:Connect(function()
        if workspace:FindFirstChild(platformName) then
            workspace[platformName]:Destroy()
            platform = nil
            stopAutoTeleport()
            updateToggleButton()
            statusLabel.Text = "Status: Platform Removed"
            print("Platform removed!")
        end
    end)
    
    -- Update cooldown display in real-time
    local function updateCooldownDisplay()
        if autoTeleportEnabled then
            local currentTime = tick()
            local timeSinceLast = currentTime - lastTeleportTime
            local timeLeft = math.max(0, teleportCooldown - timeSinceLast)
            
            if timeLeft > 0 then
                cooldownLabel.Text = string.format("Cooldown: %.1fs", timeLeft)
            else
                cooldownLabel.Text = "Cooldown: Ready!"
            end
        else
            cooldownLabel.Text = "Cooldown: 10s"
        end
    end
    
    -- Run cooldown display update
    RunService.Heartbeat:Connect(function()
        updateCooldownDisplay()
    end)
    
    -- Add hover effects for better visibility
    local function addHoverEffect(button)
        button.MouseEnter:Connect(function()
            button.BackgroundColor3 = button.BackgroundColor3:Lerp(Color3.new(1, 1, 1), 0.2)
        end)
        
        button.MouseLeave:Connect(function()
            if button == toggleBtn then
                updateToggleButton()
            elseif button == createBtn then
                button.BackgroundColor3 = Color3.new(0, 0.6, 0)
            elseif button == teleportOnceBtn then
                button.BackgroundColor3 = Color3.new(0, 0.47, 1)
            elseif button == removeBtn then
                button.BackgroundColor3 = Color3.new(0.5, 0.5, 0.5)
            end
        end)
    end
    
    addHoverEffect(createBtn)
    addHoverEffect(teleportOnceBtn)
    addHoverEffect(toggleBtn)
    addHoverEffect(removeBtn)
    
    -- Make frame draggable
    local dragging = false
    local dragStart, startPos
    
    title.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = frame.Position
            
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    
    title.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement and dragging then
            local delta = input.Position - dragStart
            frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, 
                                        startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
    
    return screenGui
end

-- Initialize
print("=========================================")
print("Auto Teleport Platform Script")
print("Original Position: (55, 4, -262)")
print("Platform Position: (55, -46, -262) [50 studs below]")
print("Teleport Cooldown: 10 seconds")
print("=========================================")

-- Create GUI
task.wait(0.2)
createSimpleGUI()

-- Optional: Auto-start the system (uncomment if you want it to auto-start)
-- task.wait(1)
-- startAutoTeleport()
